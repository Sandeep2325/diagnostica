
{%include "header.html"%}
{%include "subheader.html"%}
{%load static%}
<body>
    <section class="cart_table">
        <div class="container">
            <div class="row ">
                <div class="col-lg-12 position-relative">
                    <div class="bg-light-grey br-15">
                        <h1 class="fs-40 font-bold cl-dark-blue text-center py-lg-5 py-3 m-0  px-3">My Cart</h1>
                        <div class="row justify-content-center">
                            <div class="col-lg-12">
                                <div class="table-responsive">
                                    <div class="wrapper">
                                        <div class="table test_row">
                                            <div class="row header row_data_header">
                                                <div class="cell">
                                                    S.No
                                                </div>
                                                <div class="cell">
                                                    Test Name
                                                </div>
                                                <div class="cell">
                                                    Category Name
                                                </div>
                                                <div class="cell">
                                                </div>
                                                <div class="cell">
                                                    Price
                                                </div>
                                            </div>
{%for cart in data%}
                                            <div class="row">
                                                <div class="cell" data-title=" S.No">
                                                    {{ forloop.counter }}
                                                </div>
                                                <div class="cell" data-title="Test Name">
                                                    {{cart.items}}
                                                </div>
                                                <div class="cell" data-title="Category Name">
                                                    {{cart.categoryy}}
                                                </div>
                                                <div class="cell" data-title="">
                                                    {% comment %} href="{%url "destroy" cart.id%}" {% endcomment %}
                                                    {% comment %} <a href="{% url "destroy" cart.id%}" class="link-delete text-danger" ><i class="fa fa-trash cursor" aria-hidden="true"></i></a> {% endcomment %}
                                                   {% comment %} <button  class="link-delete br" ><i class="fa fa-trash cursor" aria-hidden="true"></i></button> {% endcomment %}
                                                <button  name={{cart.id}} id="delete"  type="button" class="link-delete br"><i class="fa fa-trash cursor" aria-hidden="true"></i></button>
                                                </div>
                                                <div class="cell" data-title="Price">
                                                   Rs {{cart.price}}
                                                </div>
                                            </div>
{%endfor%}
                                       
                                        </div> 
                                        <div class="row py-4">
                                            <div class="col-lg-6">
                                                <form action="javascript:void(0)" id="couponForm">
                                                    <h3 class="fs-24 font-bold cl-dark-blue m-0 pb-lg-4 pb-3">Enter
                                                        Coupon
                                                        Code
                                                    </h3>
                                                    <div class="row">
                                                        <div class="col-lg-6 col-md-6">
                                                            <input class="w-100 coupon_input" placeholder="Apply Coupon"
                                                                id="coupon" name="coupon" type="coupon" />
                                                        </div>
                                                        <div class="col-6 col-md-6 pt-md-0 py-3">
                                                            <button
                                                                class="coupon_apply br br-5 text-center fs-18 font-regular ms-xl-3">APPLY</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="row text-center">
                                                    <div class="col-6">
                                                        <h4 class="fs-20 font-bold cl-dark-blue mb-3">Sub Total</h4>
                                                    </div>
                                                    <div class="col-6">
                                                        <h4 class="fs-20 font-bold cl-dark-blue mb-3">Rs. {{subtotal}}</h4>
                                                    </div>
                                                </div>
                                                <div class="row py-4 text-center bg-white sub_total">
                                                    <div class="col-6">
                                                        <h4 class="fs-30 font-bold cl-dark-blue">Total</h4>
                                                    </div>
                                                    <div class="col-6">
                                                        <h4 class="fs-30 font-bold cl-dark-blue">Rs.{{subtotal}}</h4>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="  check_out">
                        <button
                            class="float-end fs-18 font-bold cl-dark-white br br-5 bg-sky-blue py-3 my-lg-5 my-3 px-5">CHECKOUT</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

{%include "footer.html"%}

</body>




<script>
    
    $.validator.addMethod('filesize', function (value, element, param) {
        return this.optional(element) || (element.files[0].size <= param)
    }, 'File size must be less than {0}');
    $("#couponForm").validate({
        rules: {
            'coupon': {
                required: true,
            },
        },
        messages: {
            'coupon': {
                required: "The Coupon is required!",
            },
        },
        submitHandler: function (form) {
            form.submit();
        }
    });

    $.validator.addMethod('filesize', function (value, element, param) {
        return this.optional(element) || (element.files[0].size <= param)
    }, 'File size must be less than {0}');
    $("#subscribes").validate({
        rules: {
            'email': {
                required: true,
                email: true
            },
        },

        messages: {
            'email': {
                required: "The Email is required!",
                email: "Please enter a valid email address!"
            },
        },
        submitHandler: function (form) {
            form.submit();
        }
    });
</script>
<script type = "text/javascript">

    
    /* $(".link-delete").on("click", function(e){
        alert("delete")
        e.preventDefault();
        var $this = $(this).val();
        if(confirm("Sure to delete?")){
            alert("ohhh")
            $.ajax({
                url: ""
                type: "GET",
                dataType: "json",
                success: function(resp){
                   alert("Deleted")
                }
            });
        }
        return false;
    }); */

    $("#delete").on("click", function(e){
        
       

        var idd = $(this).attr('name');
        
        
            $.ajax({
                url: {% url 'destroy' %},
                type: "POST",
                dataType: "json",
                data: {
                    'pk':idd,
                    'csrfmiddlewaretoken':'{{ csrf_token }}',
                },
                success: function(resp){
                   
                   window.location.reload();
                }
            });
        
        return false;
    });
    </script> 
</html>





